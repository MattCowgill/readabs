<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Download, extract, and tidy ABS time series spreadsheets — read_abs • readabs</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Download, extract, and tidy ABS time series spreadsheets — read_abs"><meta property="og:description" content="
read_abs() downloads ABS time series spreadsheets,
then extracts the data from those spreadsheets,
then tidies the data. The result is a single
data frame (tibble) containing tidied data."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">readabs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.17</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/readabs_vignette.html">Using readabs</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/mattcowgill/readabs/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download, extract, and tidy ABS time series spreadsheets</h1>
    <small class="dont-index">Source: <a href="https://github.com/mattcowgill/readabs/blob/master/R/read_abs.R" class="external-link"><code>R/read_abs.R</code></a></small>
    <div class="hidden name"><code>read_abs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
<p><code>read_abs()</code> downloads ABS time series spreadsheets,
then extracts the data from those spreadsheets,
then tidies the data. The result is a single
data frame (tibble) containing tidied data.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_abs</span><span class="op">(</span></span>
<span>  cat_no <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tables <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  series_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"R_READABS_PATH"</span>, unset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  metadata <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  show_progress_bars <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  retain_files <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  check_local <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  release_date <span class="op">=</span> <span class="st">"latest"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">read_abs_series</span><span class="op">(</span><span class="va">series_id</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-cat-no">cat_no<a class="anchor" aria-label="anchor" href="#arg-cat-no"></a></dt>
<dd><p>ABS catalogue number, as a string, including the extension.
For example, "6202.0".</p></dd>


<dt id="arg-tables">tables<a class="anchor" aria-label="anchor" href="#arg-tables"></a></dt>
<dd><p>numeric. Time series tables in <code>cat_no`` to download and extract. Default is "all", which will read all time series in </code>cat_no<code>. Specify </code>tables<code>to download and import specific tables(s) - eg.</code>tables = 1<code>or</code>tables = c(1, 5)`.</p></dd>


<dt id="arg-series-id">series_id<a class="anchor" aria-label="anchor" href="#arg-series-id"></a></dt>
<dd><p>(optional) character. Supply an ABS unique time series
identifier (such as "A2325807L") to get only that series.
This is an alternative to specifying <code>cat_no</code>.</p></dd>


<dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>Local directory in which downloaded ABS time series
spreadsheets should be stored. By default, <code>path</code> takes the value set in the
environment variable "R_READABS_PATH". If this variable is not set,
any files downloaded by read_abs()  will be stored in a temporary directory
(<code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>). See <code>Details</code> below for
more information.</p></dd>


<dt id="arg-metadata">metadata<a class="anchor" aria-label="anchor" href="#arg-metadata"></a></dt>
<dd><p>logical. If <code>TRUE</code> (the default), a tidy data frame including
ABS metadata (series name, table name, etc.) is included in the output. If
<code>FALSE</code>, metadata is dropped.</p></dd>


<dt id="arg-show-progress-bars">show_progress_bars<a class="anchor" aria-label="anchor" href="#arg-show-progress-bars"></a></dt>
<dd><p>TRUE by default. If set to FALSE, progress bars
will not be shown when ABS spreadsheets are downloading.</p></dd>


<dt id="arg-retain-files">retain_files<a class="anchor" aria-label="anchor" href="#arg-retain-files"></a></dt>
<dd><p>when TRUE (the default), the spreadsheets downloaded
from the ABS website will be saved in the directory specified with <code>path</code>.
If set to <code>FALSE</code>, the files will be stored in a temporary directory.</p></dd>


<dt id="arg-check-local">check_local<a class="anchor" aria-label="anchor" href="#arg-check-local"></a></dt>
<dd><p>If <code>TRUE</code>, the default, local <code>fst</code> files are used,
if present.</p></dd>


<dt id="arg-release-date">release_date<a class="anchor" aria-label="anchor" href="#arg-release-date"></a></dt>
<dd><p>Either <code>"latest"</code> or a string coercible to a date, such as
<code>"2022-02-01"</code>. If <code>"latest"</code>, the latest release of the requested data will
be returned. If a date, (eg. <code>"2022-02-01"</code>) <code>read_abs()</code> will
attempt to download the data from that month's release. Note that this only
works consistently as expected for monthly data. See <code>Details</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments to <code>read_abs_series()</code> are passed to <code>read_abs()</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data frame (tibble) containing the tidied data from the ABS time
series table(s).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><code>read_abs_series()</code> is a wrapper around <code>read_abs()</code>, with <code>series_id</code> as
the first argument.</p>
<p><code>read_abs()</code> downloads spreadsheet(s) from the ABS containing time
series data. These files need to be saved somewhere on your disk.
This local directory can be controlled using the <code>path</code> argument to
<code>read_abs()</code>. If the <code>path</code> argument is not set, <code>read_abs()</code> will store
the files in a directory set in the "R_READABS_PATH" environment variable.
If this variable isn't set, files will be saved in a temporary directory.</p>
<p>To check the value of the "R_READABS_PATH" variable, run
<code>Sys.getenv("R_READABS_PATH")</code>. You can set the value of this variable
for a single session using <code>Sys.setenv(R_READABS_PATH = &lt;path&gt;)</code>.
If you would like to change this variable for all future R sessions, edit
your <code>.Renviron</code> file and add <code>R_READABS_PATH = &lt;path&gt;</code> line.
The easiest way to edit this file is using <code>usethis::edit_r_environ()</code>.</p>
<p>Certain corporate networks restrict your ability to download files in an R
session. On some of these networks, the <code>"wininet"</code> method must be used when
downloading files. Users can now specify the method that will be used to
download files by setting the <code>"R_READABS_DL_METHOD"</code> environment variable.</p>
<p>For example, the following code sets the environment variable for your
current session: s<code>Sys.setenv("R_READABS_DL_METHOD" = "wininet")</code>
You can add <code>R_READABS_DL_METHOD = "wininet"</code> to your .Renviron to have
this persist across sessions.</p>
<p>The <code>release_date</code> argument allows you to download table(s) other than the
latest release. This is useful for examining revisions to time series, or
for obtaining the version of series that were available on a given date.
Note that you cannot supply more than one date to <code>release_date</code>. Note also
that any dates prior to mid-2019 (the exact date varies by series) will fail.
Specifying <code>release_date</code> only reliably works for monthly, and some
quarterly, data. It does not work for annual data.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Download and tidy all time series spreadsheets</span></span></span>
<span class="r-in"><span><span class="co"># from the Wage Price Index (6345.0)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">wpi</span> <span class="op">&lt;-</span> <span class="fu">read_abs</span><span class="op">(</span><span class="st">"6345.0"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Download table 1 from the Wage Price Index</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">wpi_t1</span> <span class="op">&lt;-</span> <span class="fu">read_abs</span><span class="op">(</span><span class="st">"6345.0"</span>, tables <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or table 1 as in the Sep 2019 release of the WPI:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">wpi_t1_sep2019</span> <span class="op">&lt;-</span> <span class="fu">read_abs</span><span class="op">(</span><span class="st">"6345.0"</span>, tables <span class="op">=</span> <span class="st">"1"</span>, release_date <span class="op">=</span> <span class="st">"2019-09-01"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or tables 1 and 2a from the WPI</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">wpi_t1_t2a</span> <span class="op">&lt;-</span> <span class="fu">read_abs</span><span class="op">(</span><span class="st">"6345.0"</span>, tables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2a"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get two specific time series, based on their time series IDs</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">cpi</span> <span class="op">&lt;-</span> <span class="fu">read_abs</span><span class="op">(</span>series_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A2325806K"</span>, <span class="st">"A2325807L"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get series IDs using the `read_abs_series()` wrapper function</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">cpi</span> <span class="op">&lt;-</span> <span class="fu">read_abs_series</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A2325806K"</span>, <span class="st">"A2325807L"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Matt Cowgill, Zoe Meers, Jaron Lee, David Diviny.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

